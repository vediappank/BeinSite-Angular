<div class="kt-portlet"
    [ngClass]="{ 'kt-portlet--body-progress' : viewLoading, 'kt-portlet--body-progress-overlay' : loadingAfterSubmit }"   >
<div class="kt-portlet__head kt-portlet__head__custom" >
    <div class="kt-portlet__head-label">
        <h3 class="kt-portlet__head-title">Agent ForeCasting</h3>
    </div>
</div>

<kt-alert *ngIf="hasFormErrors" type="warn" [duration]="30000" [showCloseButton]="true" (close)="onAlertClose($event)">
        {{ErrorMessage}}
    </kt-alert>
<div class="row" style="margin-bottom: -40px; margin-left: 10px;">

    <form class="form-group col-lg-12" style="display:block;" name="agentActivityReports" #f="ngForm">
        <div class="row" style="margin-left: 0px;" >
            <div class="col-lg-5 kt-margin-bottom-20-mobile p-3" *ngIf="CallCenterList.length > 0" >
                <mat-form-field class="mat-form-field-fluid">
                    <mat-select placeholder="Select Call Center" (selectionChange)="onChangeDuration()" [(value)]="selctedCallCenter">
                        <mat-option *ngFor="let type of CallCenterList"    value="{{ type.cc_shortname }}">
                            {{type.cc_name}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div class="col-lg-5 kt-margin-bottom-20-mobile p-3" *ngIf="Dateduration.length > 0">                 
                 <mat-form-field class="mat-form-field-fluid">
                    <mat-select placeholder="Select Year" [(value)]="defaultYear"
                        (selectionChange)="onChangeDuration()">
                        <mat-option *ngFor="let year of Dateduration" value="{{ year.Duration }}">
                            {{year.Duration}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>

            <div class="col-lg-2" style="padding-top: 12px;">
                <button matInput class="btn btn-primary" [disabled]="editFlag" color="primary" (click)="onsubmit();">Submit</button>&nbsp;

            </div>
        </div>
    </form>
</div>

<div class="mat-table__wrapper">
    <table mat-table [dataSource]="dataSource" class="lmat-elevation">
        <div *ngFor="let innerColumn of displayedColumns; index as i">
            <ng-container matColumnDef="{{innerColumn}}" *ngIf="i==0">
                <th mat-header-cell *matHeaderCellDef style="width: 150px; background-color:#341E6C; color: whitesmoke; padding-left: 10px; font-weight: bold; font-size: 14px;"> Weeks 
                    <br><span style="font-size: 13px;">mm-dd-yyyy : mm-dd-yyyy</span>
                </th>
                <td mat-cell *matCellDef="let element" style="padding-left: 12px; color: #341E6C; font-weight: bold; padding-top: 5px;">  
                    
                    <label class="container">{{element.WeeksActivity}} 
                            <input type="checkbox" [checked]="false" style="padding-left: 5px;" class="checkbox" [id]="returnchkboxid(element.WeeksActivity)"  (change)="checkboxLabel($event,returnchkboxid(element.WeeksActivity))">
                            <span class="checkmark checkbox"></span>
                          </label>
                          <span style="font-size: 10px; color: blue;" title="Week Start Date and End Date">{{element.startDate}} : {{element.endDate}}</span>
                </td>
            </ng-container>
            <ng-container matColumnDef="{{innerColumn}}" *ngIf="i==1">
                <th mat-header-cell *matHeaderCellDef style="width: 50px; background-color:#341E6C; color: whitesmoke;  font-weight: bold; "> Lock / UnLock                     
                </th>
                <td mat-cell *matCellDef="let element" style="color: #341E6C; font-weight: bold; ">  
                    <button mat-icon-button  style="color: green;"  [id]="returnunlockid(element.WeeksActivity)" (click)="lockUnLockEvent($event,returnunlockid(element.WeeksActivity),'Unlock');"  matTooltip="Click to unlock the Week" type="button"  >
                        <i class="material-icons" style="font-weight: bold;" >lock_open</i>
                    </button>
                        <button mat-icon-button style="color: red;" [id]="returnlockid(element.WeeksActivity)" (click)="lockUnLockEvent($event,returnlockid(element.WeeksActivity),'lock');"  matTooltip="Click to lock the Week" type="button"  >
                            <i class="material-icons" style="font-weight: bold;">lock</i>
                        </button>
                </td>
            </ng-container>
            <ng-container matColumnDef="{{innerColumn}}" *ngIf="i>1">
                <th mat-header-cell *matHeaderCellDef style="width: 90px; background-color:#341E6C; color: whitesmoke; padding-left: 10px; font-weight: bold;"> {{innerColumn}} </th>
                <td mat-cell *matCellDef="let element" >
                    
                    <input type="number"  [id]="returnforecastid(element.WeeksActivity+'-'+ innerColumn)" min="0"
                        style="width: 90px; border-radius: 5px;">
                </td>
            </ng-container>
        </div>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns; index as rowid" id="Row{{rowid}}"> </tr>
    </table>
</div>
</div>